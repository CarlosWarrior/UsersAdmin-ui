(this["webpackJsonplemons-admin"]=this["webpackJsonplemons-admin"]||[]).push([[0],{161:function(e,t,n){},193:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),a=n(44),r=n.n(a),s=n(264),l=n(128),o=(n.p,n(161),n(13)),d=n(52),u=n(268),j=n(260),b=n(267),h=n(1);function f(e){return Object(h.jsx)(b.a,Object(d.a)({component:"a",onClick:function(e){e.preventDefault()}},e))}function p(e){var t=[{n:"Productos",l:"/products"},{n:"Clientes",l:"/clients"},{n:"Liquidaciones",l:"/liquidations"}],n=function(){var e=0;return t.forEach((function(t,n){window.location.pathname.indexOf(t.l)>=0&&(e=n)})),e},i=c.useState(n()),a=Object(o.a)(i,2),r=a[0],s=a[1];return c.useEffect((function(){s(n())}),[window.location.pathname]),Object(h.jsx)(u.a,{sx:{width:"100%"},children:Object(h.jsx)(j.a,{value:r,onChange:function(n,c){return e.history.push(t[c].l)},"aria-label":"nav tabs example",children:t.map((function(e){return Object(h.jsx)(f,{label:e.n,href:e.l},e.n)}))})})}var x=n(80),O=n(15),m=n(20),g=i.a.createContext({clients:[],products:[],selectedProducts:!1,setSelectedProduct:function(){},assignClient:function(){}}),v=n(123),S=n.n(v),C=n(86),P=S.a.create({baseURL:C.a}),y=function(e){P.get("/products/").then((function(t){return e(t.data)})).catch((function(e){return console.log("Error on products/list: ",e)}))},w=function(e,t){P.put("/products/assignClient",e).then((function(e){return t(e.data)})).catch((function(t){return console.log("Error on products/assignClient: ",e,t)}))},k=function(e){P.get("/clients/").then((function(t){return e(t.data)})).catch((function(e){return console.log("Error on clients/list: ",e)}))},I=function(e,t){P.post("/liquidations/",e).then((function(e){return t(e.data)})).catch((function(e){return console.log("Error on liquidations/create")}))},E=function(e){var t=i.a.useState([]),n=Object(o.a)(t,2),c=n[0],a=n[1],r=i.a.useState([]),s=Object(o.a)(r,2),l=s[0],u=s[1],j=i.a.useState(!1),b=Object(o.a)(j,2),f=b[0],p=b[1];return i.a.useEffect((function(){k(u),y(a)}),[]),Object(h.jsx)(g.Provider,{value:{products:c,selectedProducts:f,setSelectedProducts:function(e){e&&e.length?p(e):p(!1)},clients:l,assignClient:function(e){console.log("Assigning client ",e," to ",f),w({products:f,client:e},(function(e){var t=c.filter((function(e){return f.includes(e.id)})).map((function(t){return Object(d.a)(Object(d.a)({},t),{},{client:e})}));a([].concat(Object(m.a)(c.filter((function(e){return!f.includes(e.id)}))),Object(m.a)(t)))}))}},children:e.children})},A=n(124),q=n(281),D=n(262),B=n(252),R=n(280),N=n(279),F=["open","close"],J=function(e){var t=e.open,n=e.close,c=(Object(A.a)(e,F),i.a.useContext(g)),a=c.selectedProducts,r=c.clients,s=c.setSelectedProducts,l=c.assignClient,o=a?"Asignar cliente a ".concat(a.length," producto").concat(a.length>1?"s":""):"";return Object(h.jsxs)(N.a,{onClose:function(){return s(!1)},open:t,children:[Object(h.jsx)(R.a,{children:o}),Object(h.jsx)(q.a,{sx:{pt:0},children:r.map((function(e){return Object(h.jsx)(D.a,{button:!0,onClick:function(){n(),l(e.id)},children:Object(h.jsx)(B.a,{primary:e.name})},e.name)}))})]})},L=n(247),T=n(277),W=n(278),K=n(274),Q=n(276),U=n(272),z=n(258),G=n(273),M=n(265),X=n(275),Z=n(93),_=n(271),H=n(261),V=n(269),Y=n(257),$=n(125),ee=n.n($),te=n(253);function ne(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function ce(e,t){var n="client"==t?"clientId":t;return"desc"===e?function(e,t){return ne(e,t,n)}:function(e,t){return-ne(e,t,n)}}function ie(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var c=t(e[0],n[0]);return 0!==c?c:e[1]-n[1]})),n.map((function(e){return e[0]}))}var ae=[{id:"sku",numeric:!1,disablePadding:!0,label:"SKU"},{id:"asin",numeric:!1,disablePadding:!0,label:"ASIN"},{id:"name",numeric:!1,disablePadding:!1,label:"Nombre"},{id:"fulfillment",numeric:!1,disablePadding:!1,label:"Cumplimiento"},{id:"status",numeric:!1,disablePadding:!1,label:"Estado"},{id:"client.name",numeric:!0,disablePadding:!1,label:"Cliente"}];function re(e){var t=e.onSelectAllClick,n=e.order,c=e.orderBy,i=e.numSelected,a=e.rowCount,r=e.onRequestSort;return Object(h.jsx)(U.a,{children:Object(h.jsxs)(G.a,{children:[Object(h.jsx)(K.a,{padding:"checkbox",children:Object(h.jsx)(H.a,{color:"primary",indeterminate:i>0&&i<a,checked:a>0&&i===a,onChange:t,inputProps:{"aria-label":"select all desserts"}})}),ae.map((function(e){return Object(h.jsx)(K.a,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"normal",sortDirection:c===e.id&&n,children:Object(h.jsxs)(M.a,{active:c===e.id,direction:c===e.id?n:"asc",onClick:(t=e.id,function(e){r(e,t)}),children:[e.label,c===e.id?Object(h.jsx)(u.a,{component:"span",sx:te.a,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var t}))]})})}var se=function(e){var t=e.numSelected,n=e.action;return Object(h.jsxs)(X.a,{sx:Object(d.a)({pl:{sm:2},pr:{xs:1,sm:1}},t>0&&{bgcolor:function(e){return Object(L.a)(e.palette.primary.main,e.palette.action.activatedOpacity)}}),children:[t>0?Object(h.jsxs)(Z.a,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[t," selected"]}):Object(h.jsx)(Z.a,{sx:{flex:"1 1 100%"},variant:"h6",id:"tableTitle",component:"div",children:"Productos"}),t>0?Object(h.jsx)(Y.a,{title:"Asignar Cliente",children:Object(h.jsx)(V.a,{onClick:n,children:Object(h.jsx)(ee.a,{})})}):null]})};function le(){var e=i.a.useContext(g),t=e.products,n=(e.clients,e.selectedProducts),c=e.setSelectedProducts,a=i.a.useState(!1),r=Object(o.a)(a,2),s=r[0],l=r[1],d=i.a.useState("asc"),j=Object(o.a)(d,2),b=j[0],f=j[1],p=i.a.useState("name"),x=Object(o.a)(p,2),O=x[0],m=x[1],v=i.a.useState([]),S=Object(o.a)(v,2),C=S[0],P=S[1],y=i.a.useState(0),w=Object(o.a)(y,2),k=w[0],I=w[1],E=i.a.useState(25),A=Object(o.a)(E,2),q=A[0],D=A[1];i.a.useEffect((function(){l(!!n)}),[n]);var B=k>0?Math.max(0,(1+k)*q-t.length):0;return Object(h.jsxs)(u.a,{sx:{width:"100%"},children:[Object(h.jsxs)(_.a,{sx:{width:"100%",mb:2},children:[Object(h.jsx)(se,{numSelected:C.length,action:function(){return c(C)}}),Object(h.jsx)(Q.a,{children:Object(h.jsxs)(T.a,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"small",children:[Object(h.jsx)(re,{numSelected:C.length,order:b,orderBy:O,onSelectAllClick:function(e){if(e.target.checked){var n=t.map((function(e){return e.id}));P(n)}else P([])},onRequestSort:function(e,t){f(O===t&&"asc"===b?"desc":"asc"),m(t)},rowCount:t.length}),Object(h.jsxs)(W.a,{children:[ie(t,ce(b,O)).slice(k*q,k*q+q).map((function(e,t){var n,c=(n=e.id,-1!==C.indexOf(n)),i="enhanced-table-checkbox-".concat(t);return Object(h.jsxs)(G.a,{hover:!0,onClick:function(t){return function(e,t){var n=C.indexOf(t),c=[];-1===n?c=c.concat(C,t):0===n?c=c.concat(C.slice(1)):n===C.length-1?c=c.concat(C.slice(0,-1)):n>0&&(c=c.concat(C.slice(0,n),C.slice(n+1))),P(c)}(0,e.id)},role:"checkbox","aria-checked":c,tabIndex:-1,selected:c,children:[Object(h.jsx)(K.a,{padding:"checkbox",children:Object(h.jsx)(H.a,{color:"primary",checked:c,inputProps:{"aria-labelledby":i}})}),Object(h.jsx)(K.a,{component:"th",id:i,scope:"row",padding:"none",children:e.sku}),Object(h.jsx)(K.a,{align:"right",children:e.asin}),Object(h.jsx)(K.a,{align:"right",children:e.name}),Object(h.jsx)(K.a,{align:"right",children:e.fulfillment}),Object(h.jsx)(K.a,{align:"right",children:e.status}),Object(h.jsx)(K.a,{align:"right",children:e.client?e.client.name:"-"})]},e.id)})),B>0&&Object(h.jsx)(G.a,{style:{height:33*B},children:Object(h.jsx)(K.a,{colSpan:6})})]})]})}),Object(h.jsx)(z.a,{rowsPerPageOptions:[25,50,100],component:"div",count:t.length,rowsPerPage:q,page:k,onPageChange:function(e,t){I(t)},onRowsPerPageChange:function(e){D(parseInt(e.target.value,10)),I(0)}})]}),Object(h.jsx)(J,{open:s,close:function(){l(!1),c(!1)}})]})}var oe=n(256),de=function(){return Object(h.jsx)(E,{children:Object(h.jsx)(oe.a,{direction:"row",justifyContent:"space-evenly",alignItems:"flex-start",spacing:2,children:Object(h.jsxs)(O.d,{children:[Object(h.jsx)(O.b,{path:"/",children:Object(h.jsx)(le,{})}),Object(h.jsx)(O.b,{path:"/products/",children:Object(h.jsx)(le,{})})]})})})},ue=function(){var e=i.a.useContext(g).clients;return Object(h.jsx)(Q.a,{component:_.a,children:Object(h.jsxs)(T.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(h.jsx)(U.a,{children:Object(h.jsxs)(G.a,{children:[Object(h.jsx)(K.a,{children:"Clientes"}),Object(h.jsx)(K.a,{alignt:"left",children:"SKU"}),Object(h.jsx)(K.a,{alignt:"left",children:"Bundle"}),Object(h.jsx)(K.a,{alignt:"left",children:"Productos"})]})}),Object(h.jsx)(W.a,{children:e.map((function(e){return Object(h.jsxs)(G.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(h.jsx)(K.a,{align:"left",children:e.name}),Object(h.jsx)(K.a,{align:"left",children:e.prefix}),Object(h.jsx)(K.a,{align:"left",children:e.bundle}),Object(h.jsx)(K.a,{align:"left",children:e.products.length})]},e.name)}))})]})})},je=function(){return Object(h.jsx)(E,{children:Object(h.jsx)(oe.a,{direction:"row",justifyContent:"space-evenly",alignItems:"flex-start",spacing:2,children:Object(h.jsxs)(O.d,{children:[Object(h.jsx)(O.b,{path:"/",children:Object(h.jsx)(ue,{})}),Object(h.jsx)(O.b,{path:"/products/",children:Object(h.jsx)(ue,{})})]})})})},be=n(270),he=function(){var e=i.a.useRef(),t=i.a.useRef(),n=(i.a.useRef(),function(e){window.open(C.a+e,"_blank")});return Object(h.jsxs)("div",{style:{display:"flex",margin:"auto",width:400,flexWrap:"wrap"},children:[Object(h.jsxs)("div",{style:{width:"100%",float:"left"},children:[Object(h.jsx)("h3",{children:"Subir reporte de pagos"})," ",Object(h.jsx)("br",{})]}),Object(h.jsxs)("form",{onSubmit:function(c){if(console.log("Submitting file"),c.stopPropagation(),c.preventDefault(),e.current.files.length){t.current.disabled=!0;var i=new FormData;i.append("payments",e.current.files[0]),console.log("Submitting file: ",c),I(i,n)}},encType:"multipart/form-data",children:[Object(h.jsx)("input",{type:"file",id:"contained-button-file",name:"payment",ref:e}),Object(h.jsx)(be.a,{ref:t,variant:"contained",color:"primary",type:"submit",children:"Generar requisiciones"})]})]})};Object(l.a)({apiKey:"AIzaSyBBopuJb9L9InWQlcQ9ESZ-d-pIagtStDA",authDomain:"productmanagerui.firebaseapp.com",projectId:"productmanagerui",storageBucket:"productmanagerui.appspot.com",messagingSenderId:"123694963560",appId:"1:123694963560:web:884d5694bffcd1c796d4dd",measurementId:"G-NDXRQN5JDN"});var fe=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)(x.a,{children:[Object(h.jsx)(p,{}),Object(h.jsxs)(O.d,{children:[Object(h.jsx)(O.b,{exact:!0,path:"/",children:Object(h.jsx)(O.a,{to:"/liquidations"})}),Object(h.jsx)(O.b,{path:"/liquidations/",component:he}),Object(h.jsx)(O.b,{path:"/products/",component:de}),Object(h.jsx)(O.b,{path:"/clients/",component:je})]})]})})},pe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,282)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),i(e),a(e),r(e)}))},xe=n(56),Oe=n(127),me=Object(Oe.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:xe.a.A400}}});r.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(s.a,{theme:me,children:Object(h.jsx)(fe,{})})}),document.getElementById("root")),pe()},86:function(e){e.exports=JSON.parse('{"a":"http://localhost:3001"}')}},[[193,1,2]]]);
//# sourceMappingURL=main.baf9e444.chunk.js.map